from locust import HttpUser, TaskSet, task, between, constant
from locust import LoadTestShape

class QuickstartUser(HttpUser):
    wait_time = constant(1)

    @task(1)
    def index_page(self):
        self.client.get("/test")

class StagesShape(LoadTestShape):
    """
    A simply load test shape class that has different user and spawn_rate at
    different stages.
    Keyword arguments:
        stages -- A list of dicts, each representing a stage with the following keys:
            duration -- When this many seconds pass the test is advanced to the next stage
            users -- Total user count
            spawn_rate -- Number of users to start/stop per second
            stop -- A boolean that can stop that test at a specific stage
        stop_at_end -- Can be set to stop once all stages have run.
    """

    stages = [
        {"duration": 30, "users": 19, "spawn_rate": 19},
        {"duration": 60, "users": 16, "spawn_rate": 16},
        {"duration": 90, "users": 25, "spawn_rate": 25},
        {"duration": 120, "users": 47, "spawn_rate": 47},
        {"duration": 150, "users": 33, "spawn_rate": 33},
        {"duration": 180, "users": 15, "spawn_rate": 15},
        {"duration": 210, "users": 19, "spawn_rate": 19},
        {"duration": 240, "users": 13, "spawn_rate": 13},
        {"duration": 270, "users": 25, "spawn_rate": 25},
        {"duration": 300, "users": 50, "spawn_rate": 50},
        {"duration": 330, "users": 40, "spawn_rate": 40},
        {"duration": 360, "users": 66, "spawn_rate": 66},
        {"duration": 390, "users": 35, "spawn_rate": 35},
        {"duration": 420, "users": 55, "spawn_rate": 55},
        {"duration": 450, "users": 80, "spawn_rate": 80},
        {"duration": 480, "users": 33, "spawn_rate": 33},
        {"duration": 510, "users": 41, "spawn_rate": 41},
        {"duration": 540, "users": 22, "spawn_rate": 22},
        {"duration": 570, "users": 16, "spawn_rate": 16},
        {"duration": 600, "users": 18, "spawn_rate": 18},
        {"duration": 630, "users": 11, "spawn_rate": 11},
        {"duration": 660, "users": 8, "spawn_rate": 8},
        {"duration": 690, "users": 15, "spawn_rate": 15},
        {"duration": 720, "users": 9, "spawn_rate": 9},
        {"duration": 750, "users": 13, "spawn_rate": 13},
        {"duration": 780, "users": 8, "spawn_rate": 8},
        {"duration": 810, "users": 11, "spawn_rate": 11},
        {"duration": 840, "users": 8, "spawn_rate": 8},
        {"duration": 870, "users": 14, "spawn_rate": 14},
        {"duration": 900, "users": 11, "spawn_rate": 11},
        {"duration": 930, "users": 11, "spawn_rate": 11},
        {"duration": 960, "users": 19, "spawn_rate": 19},
        {"duration": 990, "users": 28, "spawn_rate": 28},
        {"duration": 1020, "users": 70, "spawn_rate": 70},
        {"duration": 1050, "users": 30, "spawn_rate": 30},
        {"duration": 1080, "users": 27, "spawn_rate": 27},
        {"duration": 1110, "users": 78, "spawn_rate": 78},
        {"duration": 1140, "users": 55, "spawn_rate": 55},
        {"duration": 1170, "users": 47, "spawn_rate": 47},
        {"duration": 1200, "users": 44, "spawn_rate": 44},
        {"duration": 1230, "users": 33, "spawn_rate": 33},
        {"duration": 1260, "users": 34, "spawn_rate": 34},
        {"duration": 1290, "users": 50, "spawn_rate": 50},
        {"duration": 1320, "users": 66, "spawn_rate": 66},
        {"duration": 1350, "users": 66, "spawn_rate": 66},
        {"duration": 1380, "users": 69, "spawn_rate": 69},
        {"duration": 1410, "users": 94, "spawn_rate": 94},
        {"duration": 1440, "users": 53, "spawn_rate": 53},
        {"duration": 1470, "users": 56, "spawn_rate": 56},
        {"duration": 1500, "users": 86, "spawn_rate": 86},
        {"duration": 1530, "users": 100, "spawn_rate": 100},
        {"duration": 1560, "users": 56, "spawn_rate": 56},
        {"duration": 1590, "users": 50, "spawn_rate": 50},
        {"duration": 1620, "users": 69, "spawn_rate": 69},
        {"duration": 1650, "users": 33, "spawn_rate": 33},
        {"duration": 1680, "users": 25, "spawn_rate": 25},
        {"duration": 1710, "users": 28, "spawn_rate": 28},
        {"duration": 1740, "users": 55, "spawn_rate": 55},
        {"duration": 1770, "users": 25, "spawn_rate": 25},
        {"duration": 1800, "users": 17, "spawn_rate": 17},
        {"duration": 1830, "users": 14, "spawn_rate": 14},
        {"duration": 1860, "users": 18, "spawn_rate": 18},
        {"duration": 1890, "users": 22, "spawn_rate": 22},
        {"duration": 1920, "users": 12, "spawn_rate": 12},
        {"duration": 1950, "users": 8, "spawn_rate": 8},
        {"duration": 1980, "users": 9, "spawn_rate": 9},
        {"duration": 2010, "users": 11, "spawn_rate": 11},
        {"duration": 2040, "users": 8, "spawn_rate": 8},
        {"duration": 2070, "users": 17, "spawn_rate": 17},
        {"duration": 2100, "users": 15, "spawn_rate": 15},
        {"duration": 2130, "users": 34, "spawn_rate": 34},
        {"duration": 2160, "users": 28, "spawn_rate": 28},
        {"duration": 2190, "users": 36, "spawn_rate": 36},
        {"duration": 2220, "users": 41, "spawn_rate": 41},
        {"duration": 2250, "users": 33, "spawn_rate": 33},
        {"duration": 2280, "users": 40, "spawn_rate": 40},
        {"duration": 2310, "users": 35, "spawn_rate": 35},
        {"duration": 2340, "users": 42, "spawn_rate": 42},
        {"duration": 2370, "users": 31, "spawn_rate": 31},
        {"duration": 2400, "users": 23, "spawn_rate": 23},
        {"duration": 2430, "users": 25, "spawn_rate": 25},
        {"duration": 2460, "users": 15, "spawn_rate": 15},
        {"duration": 2490, "users": 17, "spawn_rate": 17},
        {"duration": 2520, "users": 14, "spawn_rate": 14},
        {"duration": 2550, "users": 16, "spawn_rate": 16},
        {"duration": 2580, "users": 8, "spawn_rate": 8},
        {"duration": 2610, "users": 12, "spawn_rate": 12},
        {"duration": 2640, "users": 8, "spawn_rate": 8},
        {"duration": 2670, "users": 12, "spawn_rate": 12},
        {"duration": 2700, "users": 10, "spawn_rate": 10},
        {"duration": 2730, "users": 11, "spawn_rate": 11},
        {"duration": 2760, "users": 13, "spawn_rate": 13},
        {"duration": 2790, "users": 11, "spawn_rate": 11},
        {"duration": 2820, "users": 21, "spawn_rate": 21},
        {"duration": 2850, "users": 15, "spawn_rate": 15},
        {"duration": 2880, "users": 16, "spawn_rate": 16},
        {"duration": 2910, "users": 12, "spawn_rate": 12},
        {"duration": 2940, "users": 18, "spawn_rate": 18},
        {"duration": 2970, "users": 19, "spawn_rate": 19},
        {"duration": 3000, "users": 16, "spawn_rate": 16},
        {"duration": 3030, "users": 25, "spawn_rate": 25},
        {"duration": 3060, "users": 47, "spawn_rate": 47},
        {"duration": 3090, "users": 33, "spawn_rate": 33},
        {"duration": 3120, "users": 15, "spawn_rate": 15},
        {"duration": 3150, "users": 19, "spawn_rate": 19},
        {"duration": 3180, "users": 13, "spawn_rate": 13},
        {"duration": 3210, "users": 25, "spawn_rate": 25},
        {"duration": 3240, "users": 50, "spawn_rate": 50},
        {"duration": 3270, "users": 40, "spawn_rate": 40},
        {"duration": 3300, "users": 66, "spawn_rate": 66},
        {"duration": 3330, "users": 35, "spawn_rate": 35},
        {"duration": 3360, "users": 55, "spawn_rate": 55},
        {"duration": 3390, "users": 80, "spawn_rate": 80},
        {"duration": 3420, "users": 33, "spawn_rate": 33},
        {"duration": 3450, "users": 41, "spawn_rate": 41},
        {"duration": 3480, "users": 22, "spawn_rate": 22},
        {"duration": 3510, "users": 16, "spawn_rate": 16},
        {"duration": 3540, "users": 18, "spawn_rate": 18},
        {"duration": 3570, "users": 11, "spawn_rate": 11},
        {"duration": 3600, "users": 8, "spawn_rate": 8},
        {"duration": 3630, "users": 15, "spawn_rate": 15},
        {"duration": 3660, "users": 9, "spawn_rate": 9},
        {"duration": 3690, "users": 13, "spawn_rate": 13},
        {"duration": 3720, "users": 8, "spawn_rate": 8},
        {"duration": 3750, "users": 11, "spawn_rate": 11},
        {"duration": 3780, "users": 8, "spawn_rate": 8},
        {"duration": 3810, "users": 14, "spawn_rate": 14},
        {"duration": 3840, "users": 11, "spawn_rate": 11},
        {"duration": 3870, "users": 11, "spawn_rate": 11},
        {"duration": 3900, "users": 19, "spawn_rate": 19},
        {"duration": 3930, "users": 28, "spawn_rate": 28},
        {"duration": 3960, "users": 70, "spawn_rate": 70},
        {"duration": 3990, "users": 30, "spawn_rate": 30},
        {"duration": 4020, "users": 27, "spawn_rate": 27},
        {"duration": 4050, "users": 78, "spawn_rate": 78},
        {"duration": 4080, "users": 55, "spawn_rate": 55},
        {"duration": 4110, "users": 47, "spawn_rate": 47},
        {"duration": 4140, "users": 44, "spawn_rate": 44},
        {"duration": 4170, "users": 33, "spawn_rate": 33},
        {"duration": 4200, "users": 34, "spawn_rate": 34},
        {"duration": 4230, "users": 50, "spawn_rate": 50},
        {"duration": 4260, "users": 66, "spawn_rate": 66},
        {"duration": 4290, "users": 66, "spawn_rate": 66},
        {"duration": 4320, "users": 69, "spawn_rate": 69},
        {"duration": 4350, "users": 94, "spawn_rate": 94},
        {"duration": 4380, "users": 53, "spawn_rate": 53},
        {"duration": 4410, "users": 56, "spawn_rate": 56},
        {"duration": 4440, "users": 86, "spawn_rate": 86},
        {"duration": 4470, "users": 100, "spawn_rate": 100},
        {"duration": 4500, "users": 56, "spawn_rate": 56},
        {"duration": 4530, "users": 50, "spawn_rate": 50},
        {"duration": 4560, "users": 69, "spawn_rate": 69},
        {"duration": 4590, "users": 33, "spawn_rate": 33},
        {"duration": 4620, "users": 25, "spawn_rate": 25},
        {"duration": 4650, "users": 28, "spawn_rate": 28},
        {"duration": 4680, "users": 55, "spawn_rate": 55},
        {"duration": 4710, "users": 25, "spawn_rate": 25},
        {"duration": 4740, "users": 17, "spawn_rate": 17},
        {"duration": 4770, "users": 14, "spawn_rate": 14},
        {"duration": 4800, "users": 18, "spawn_rate": 18},
        {"duration": 4830, "users": 22, "spawn_rate": 22},
        {"duration": 4860, "users": 12, "spawn_rate": 12},
        {"duration": 4890, "users": 8, "spawn_rate": 8},
        {"duration": 4920, "users": 9, "spawn_rate": 9},
        {"duration": 4950, "users": 11, "spawn_rate": 11},
        {"duration": 4980, "users": 8, "spawn_rate": 8},
        {"duration": 5010, "users": 17, "spawn_rate": 17},
        {"duration": 5040, "users": 15, "spawn_rate": 15},
        {"duration": 5070, "users": 34, "spawn_rate": 34},
        {"duration": 5100, "users": 28, "spawn_rate": 28},
        {"duration": 5130, "users": 36, "spawn_rate": 36},
        {"duration": 5160, "users": 41, "spawn_rate": 41},
        {"duration": 5190, "users": 33, "spawn_rate": 33},
        {"duration": 5220, "users": 40, "spawn_rate": 40},
        {"duration": 5250, "users": 35, "spawn_rate": 35},
        {"duration": 5280, "users": 42, "spawn_rate": 42},
        {"duration": 5310, "users": 31, "spawn_rate": 31},
        {"duration": 5340, "users": 23, "spawn_rate": 23},
        {"duration": 5370, "users": 25, "spawn_rate": 25},
        {"duration": 5400, "users": 15, "spawn_rate": 15},
        {"duration": 5430, "users": 17, "spawn_rate": 17},
        {"duration": 5460, "users": 14, "spawn_rate": 14},
        {"duration": 5490, "users": 16, "spawn_rate": 16},
        {"duration": 5520, "users": 8, "spawn_rate": 8},
        {"duration": 5550, "users": 12, "spawn_rate": 12},
        {"duration": 5580, "users": 8, "spawn_rate": 8},
        {"duration": 5610, "users": 12, "spawn_rate": 12},
        {"duration": 5640, "users": 10, "spawn_rate": 10},
        {"duration": 5670, "users": 11, "spawn_rate": 11},
        {"duration": 5700, "users": 13, "spawn_rate": 13},
        {"duration": 5730, "users": 11, "spawn_rate": 11},
        {"duration": 5760, "users": 21, "spawn_rate": 21},
        {"duration": 5790, "users": 15, "spawn_rate": 15},
        {"duration": 5820, "users": 16, "spawn_rate": 16},
        {"duration": 5850, "users": 12, "spawn_rate": 12},
        {"duration": 5880, "users": 18, "spawn_rate": 18},

    ]

    def tick(self):
        run_time = self.get_run_time()

        for stage in self.stages:
            if run_time < stage["duration"]:
                tick_data = (stage["users"], stage["spawn_rate"])
                return tick_data

        return None
